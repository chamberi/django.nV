#Vulnerability Report
**Reviewer 1:** Colin Lamont

**Reviewer 2:** Claire Gatenby

**Date:** Feb 03, 2017

**Reviewing:** [django.nV](https://github.com/nVisium/django.nV)

##A1 - Injection

###Exposure
We found an instance of [vulnerability 1] by typing some relevant code into some vulnerable field OR by doing some edge-case thing.

By exploiting [this vulnerability], we were able to retrieve XYZ attributes from the site / access to some unauthorized part of the site / something else valuable.

###Repair
problem_file1.py and problem_file2.py contained the vulnerability. We were able to fix the first with the following adjustment(s):

tutorials/base.html and base_backend.html
```
<span class="username">{{ user.username|safe }}</span>
```
problem_file2.py

```
Some body of relevant code that solves our problem
```

##A2 - Broken Auth

##A3 - Cross Site Scripting (XSS)

XSS flaws occur whenever an application takes untrusted data and sends it to a web browser without proper validation or escaping. XSS allows attackers to execute scripts in the victim’s browser which can hijack user sessions, deface web sites, or redirect the user to malicious sites.

###Exposure
By changing the username to `<script>alert('boo!');</script>` we were able to inject javascript into the website. On reload of the dashboard, an alert box poped up with the word 'boo!'.

###Repair
The username is rendered from the database to the top corner of the page and has the django `safe` method. This method marks a string as not requiring further HTML escaping prior to output. This occurs in tutorials/base.html and base_backend.html
```
<span class="username">{{ user.username|safe }}</span>
```
Removing the `safe` method allows the username to be escaped and prevents scripts from being run on the website.

##A4 - Insecure Direct Object Reference (DOR)

A direct object reference is likely to occur when a developer exposes a reference to an internal implementation object, such as a file, directory, or database key without any validation mechanism which will allow attackers to manipulate these references to access unauthorized data.

### Exposure
By choosing a route with an id we were able to go to forms and perform POST requests for tasks that weren't our own.

For example the routes
`/taskManager/1/project_delete/`

`/taskManager/1/edit_project/`

`/taskManager/1/upload/`

We were able to delete, edit and upload projects without actually owning the project, just by typing in the URL.

### Repair
Check user is Authenticated for tasks in the `views.py` function, and don't allow unauthenticated users access to the website.

Using django's `user.is_authenticated()` method in the `views.py` can check if the user is logged in. `user.has_permission()` checks if the user belongs to a particular permission group.

The views that have this vulnerability will have to be updated with these methods, an example below is for the `project_delete` view. 

```Python
def project_delete(request, project_id):

    if user.has_permission('delete'):
        project = Project.objects.get(pk=project_id)
        project.delete()
        return redirect('/taskManager/dashboard')
```

##A5 - Security Misconfiguration
Good security requires having a secure configuration defined and deployed for the application, frameworks, application server, web server, database server, and platform. Secure settings should be defined, implemented, and maintained, as defaults are often insecure. Additionally, software should be kept up to date.

###Exposure

### Repair

##A6 - Sensitive Data Exposure
Many web applications do not properly protect sensitive data, such as credit cards, tax IDs, and authentication credentials. Attackers may steal or modify such weakly protected data to conduct credit card fraud, identity theft, or other crimes. Sensitive data deserves extra protection such as encryption at rest or in transit, as well as special precautions when exchanged with the browser.

###Exposure

### Repair

##A7 - Missing Function Level Access Control
Most web applications verify function level access rights before making that functionality visible in the UI. However, applications need to perform the same access control checks on the server when each function is accessed. If requests are not verified, attackers will be able to forge requests in order to access functionality without proper authorization.

###Exposure

### Repair

##A8 - Cross-Site Request Forgery (CSRF)
A CSRF attack forces a logged-on victim’s browser to send a forged HTTP request, including the victim’s session cookie and any other automatically included authentication information, to a vulnerable web application. This allows the attacker to force the victim’s browser to generate requests the vulnerable application thinks are legitimate requests from the victim.

###Exposure

### Repair